<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>
<beans>
    <bean id="treeDumpEngine" class="com.andreikubar.alfresco.migration.TreeDumpEngine">
        <constructor-arg ref="ServiceRegistry"/>
        <property name="exportNodeBuilder" ref="exportNodeBuilder"/>
        <property name="propertyFile">
            <value>C:/tmp/alfrescoExport/treedump.properties</value>
        </property>
        <property name="wirelineExportService" ref="wirelineExportService"/>
        <property name="defaultContentStore" ref="fileContentStore"/>
    </bean>

    <bean id="exportNodeBuilder" class="com.andreikubar.alfresco.migration.export.ExportNodeBuilder">
        <constructor-arg ref="ServiceRegistry"/>
        <property name="useCmName">
            <value>true</value>
        </property>
    </bean>

    <bean id="wirelineExportService" class="com.andreikubar.alfresco.migration.export.wireline.WirelineExportService">
        <constructor-arg ref="ServiceRegistry"/>
    </bean>

    <bean id="protoExportService" class="com.andreikubar.alfresco.migration.export.ProtoExportService">
        <constructor-arg ref="ServiceRegistry"/>
    </bean>

    <bean id="exportEngine" class="com.andreikubar.alfresco.migration.ExportEngine">
        <constructor-arg index="0" ref="ServiceRegistry"/>
        <constructor-arg index="1" ref="fileContentStore"/>
        <property name="exportNodeBuilder" ref="exportNodeBuilder"/>
        <property name="wirelineExportService" ref="wirelineExportService"/>
        <property name="protoExportService" ref="protoExportService"/>
        <property name="propertyFile">
            <value>C:/tmp/export-levelwise/treedump.properties</value>
        </property>
    </bean>

    <bean id="webscript.com.andreikubar.alfresco.migration.treedump.get"
          class="com.andreikubar.alfresco.migration.webscript.TreeDumpWebscript" parent="webscript">
        <constructor-arg ref="treeDumpEngine"/>
    </bean>

    <bean id="webscript.com.andreikubar.alfresco.migration.treedump-shutdown.get"
          class="com.andreikubar.alfresco.migration.webscript.TreeDumpShutdown" parent="webscript">
        <constructor-arg ref="treeDumpEngine"/>
    </bean>

    <bean id="webscript.com.andreikubar.alfresco.migration.subtypelist.get"
          class="com.andreikubar.alfresco.migration.webscript.SubtypeListerWebscript" parent="webscript">
        <constructor-arg ref="ServiceRegistry"/>
    </bean>

    <bean id="webscript.com.andreikubar.alfresco.migration.export-levelwise.get"
          class="com.andreikubar.alfresco.migration.webscript.ExportLevelwiseWebscript" parent="webscript" >
        <constructor-arg ref="exportEngine"/>
    </bean>

    <bean id="webscript.com.andreikubar.alfresco.migration.export-levelwise-shutdown.get"
          class="com.andreikubar.alfresco.migration.webscript.ExportLevelwiseShutdownWebscript"
          parent="webscript">
        <constructor-arg ref="exportEngine"/>
    </bean>

</beans>